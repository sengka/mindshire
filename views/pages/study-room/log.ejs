<section class="study-room">
  <div class="study-room__container">
    <div class="study-room__header">
      <div>
        <h1 class="study-room__title">BugÃ¼nkÃ¼ Pomodorolar</h1>
        <p class="study-room__subtitle">
          BugÃ¼n kaydedilen oturumlar + toplam odak sÃ¼ren.
        </p>
      </div>

      <div class="study-room__row">
        <a class="btn-secondary" href="/study-room/personal">â† KiÅŸisel Oda</a>
        <a class="btn-secondary" href="/study-room/community">Topluluk Oda</a>
      </div>
    </div>

    <div class="study-room__grid">
      <!-- Ã–zet kartÄ± -->
      <div class="study-room__card">
        <h2>Ã–zet</h2>

        <div class="stats-row">
          <div class="stat">
            <div class="stat__label">Toplam odak</div>
            <div class="stat__value"><%= totalFocusMinutes %> dk</div>
          </div>

          <div class="stat">
            <div class="stat__label">Toplam oturum</div>
            <div class="stat__value"><%= (sessions || []).length %></div>
          </div>
        </div>

        <p class="study-room__hint">
          Ä°pucu: â€œOdak/Ã–zelâ€ oturumlarÄ± toplam odaÄŸa eklenir. Molalar ayrÄ±
          tutulur.
        </p>
      </div>

      <!-- Liste kartÄ± -->
      <div class="study-room__card">
        <h2>Oturumlar</h2>

        <% if (!sessions || sessions.length === 0) { %>
        <p class="study-room__hint">BugÃ¼n henÃ¼z kayÄ±t yok. Bir tur baÅŸlat ğŸ…</p>
        <% } else { %>
        <div class="log-list">
          <% sessions.forEach((s) => { const started = s.startedAt ? new
          Date(s.startedAt) : null; const ended = s.endedAt ? new
          Date(s.endedAt) : null; const fmt = (d) => d ?
          d.toLocaleTimeString("tr-TR", { hour: "2-digit", minute: "2-digit" })
          : "--:--"; const mode = s.mode || "work"; const status = s.status ||
          "unknown"; const planned = Number(s.plannedMinutes || 0); const mins =
          Math.round((Number(s.actualSeconds || 0)) / 60); const badgeText =
          mode === "work" ? "ğŸ… Odak" : mode === "short" ? "â˜• KÄ±sa mola" : mode
          === "long" ? "ğŸŒ™ Uzun mola" : "âœ¨ Ã–zel"; %>

          <div class="log-item">
            <div class="log-item__left">
              <div class="log-item__title">
                <span class="badge"><%= badgeText %></span>
                <span class="muted">â€¢</span>
                <span class="muted"><%= status %></span>
              </div>

              <div class="log-item__meta">
                <span>BaÅŸlangÄ±Ã§: <strong><%= fmt(started) %></strong></span>
                <span class="muted">â†’</span>
                <span>BitiÅŸ: <strong><%= fmt(ended) %></strong></span>
              </div>
            </div>

            <div class="log-item__right">
              <div class="log-item__mins"><%= mins %> dk</div>
              <div class="muted"><%= planned %> dk plan</div>
            </div>
          </div>

          <% }) %>
        </div>
        <% } %>
      </div>
    </div>
  </div>
</section>
