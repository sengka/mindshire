<div class="fixed-background"></div>

<section class="stats-page">
    <div class="stats-container">
        <div class="stats-header">
            <h1 class="stats-title">ğŸ“Š Genel Ä°statistikler</h1>
            <p class="stats-subtitle">Ã‡alÄ±ÅŸma performansÄ±n ve ilerleme Ã¶zeti</p>
        </div>

        <!-- Ã–zet Kartlar -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">ğŸ…</div>
                <div class="stat-value">
                    <%= stats.totalPomodoros %>
                </div>
                <div class="stat-label">Toplam Pomodoro</div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">â±ï¸</div>
                <div class="stat-value">
                    <%= stats.totalTime %>
                </div>
                <div class="stat-label">Toplam Ã‡alÄ±ÅŸma SÃ¼resi</div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">âœ…</div>
                <div class="stat-value">
                    <%= stats.totalTasks %>
                </div>
                <div class="stat-label">Tamamlanan GÃ¶rev</div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">ğŸ¯</div>
                <div class="stat-value">
                    <%= stats.topCategory %>
                </div>
                <div class="stat-label">En Aktif Kategori</div>
            </div>
        </div>

        <!-- AylÄ±k Trend -->
        <div class="stats-section">
            <h2>ğŸ“ˆ Son 6 AyÄ±n Trendi</h2>
            <div class="chart-container">
                <% if (stats.monthlyTrend && stats.monthlyTrend.length> 0) { %>
                    <div class="simple-chart">
                        <% stats.monthlyTrend.forEach(month=> { %>
                            <div class="chart-bar">
                                <div class="bar-fill"
                                    style="height: <%= Math.min(100, (month.totalMinutes / 300) * 100) %>%">
                                    <span class="bar-label">
                                        <%= Math.round(month.totalMinutes) %> dk
                                    </span>
                                </div>
                                <div class="bar-month">
                                    <%= month._id.month %>/<%= month._id.year %>
                                </div>
                            </div>
                            <% }) %>
                    </div>
                    <% } else { %>
                        <p class="empty-state">HenÃ¼z veri yok. Ã‡alÄ±ÅŸmaya baÅŸla!</p>
                        <% } %>
            </div>
        </div>

        <!-- Kategori DaÄŸÄ±lÄ±mÄ± -->
        <div class="stats-section">
            <h2>ğŸ“š Kategori DaÄŸÄ±lÄ±mÄ± (Top 5)</h2>
            <div class="category-list">
                <% if (stats.categoryDistribution && stats.categoryDistribution.length> 0) { %>
                    <% stats.categoryDistribution.forEach((cat, index)=> { %>
                        <div class="category-item">
                            <div class="category-rank">#<%= index + 1 %>
                            </div>
                            <div class="category-name">
                                <%= cat._id %>
                            </div>
                            <div class="category-count">
                                <%= cat.count %> gÃ¶rev
                            </div>
                        </div>
                        <% }) %>
                            <% } else { %>
                                <p class="empty-state">HenÃ¼z tamamlanmÄ±ÅŸ gÃ¶rev yok.</p>
                                <% } %>
            </div>
        </div>

        <!-- HÄ±zlÄ± Linkler -->
        <div class="stats-links">
            <a href="/stats/pomodoro" class="stats-link-card">
                <span class="link-icon">ğŸ…</span>
                <span class="link-text">Pomodoro GeÃ§miÅŸi</span>
            </a>
            <a href="/stats/weekly" class="stats-link-card">
                <span class="link-icon">ğŸ“Š</span>
                <span class="link-text">HaftalÄ±k Grafikler</span>
            </a>
            <a href="/stats/streaks" class="stats-link-card">
                <span class="link-icon">ğŸ”¥</span>
                <span class="link-text">Streak Ä°statistikleri</span>
            </a>
        </div>
    </div>
</section>